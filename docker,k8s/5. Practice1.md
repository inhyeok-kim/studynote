# 컨테이너를 생성, 실행, 상태 확인, 종료, 삭제 해보자.
본 실습에서는 간단하게 아파치 웹서버 이미지를 사용하여 만들어보자.
1. 컨테이너 생성 및 실행
  - 커맨드 : docker run --name apa000ex1 -d httpd

|항목|내용|
|---|---|
|--name apa000ex1|apa000ex1 이라는 이름으로 컨테이너를 생성|
|-d|백그라운드로 실행|
|httpd|httpd 이미지 이름. 버전을 지정하지 않아 최신 버전으로 설치된다.|

2. 실행 중인 컨테이너 확인
  - 커맨드 : docker ps
  - 아래 표와 같은 결과가 출력된다.

|CONTAINER ID|IMAGE|COMMAND|CREATED|STATUS|PORTS|NAMES|
|---|---|---|---|---|---|---|
|acc401f0b507|httpd|"httpd-foreground"|35 seconds ago|Up 34 seconds|80/tcp|apa000ex1|

3. 컨테이너 종료
   - 커맨드 docker stop apa000ex1
  
4. ps 커맨드를 사용해 컨테이너 종료 확인
   - 커맨드 : docker ps
   - 성공적으로 종료되었으면 해당 컨테이너가 출력되지 않는다.
  
5. ps 커맨드와 인자를 사용해 컨테이너 존재 여부 확인
   - 커맨드 : docker ps -a
   - STATUS가 Exited로 나오면 컨테이너가 존재는 하지만 종료된 상태라는 뜻

6. rm 커맨드로 컨테이너 삭제
   - 커맨드 : docker rm apa000ex1

7. ps 커맨드와 인자를 사용해 컨테이너 존재 여부 확인
 - 커맨드 : docker ps -a

# 컨테이너와 통신해보자
이번에는 웹 브라우저를 통해 컨테이너에 접근해 아파치 웹 서버가 잘 동작하는지 확인해보자.  
외부에서 컨테이너에 접근이 가능하게 하려면 컨테이너를 실행할 때 설정을 해야한다. 또한 이 설정은 컨테이너의 실행 이후에는 기본적으로 변경할 수 없다. 따라서 docker run 커맨드에 옵션을 추가하여 실행한다.
컨테이너를 실행하면 아파치는 자동으로 80포트를 사용한다. 다만 여기서의 80포트는 컨테이너 내부의 80포트지 호스트 컴퓨터의 80포트를 의미하는 것은 아니다. 
그렇다 결국 외부에서 컨테이너의 아파치 서버에 접근하려면 호스트 컴퓨터의 포트 번호와 컨테이너 내부의 포트 번호를 매칭시켜줘야 한다. 이 설정을 하는 것이 -p 옵션이며 그 뒤에 호스트의 포트 번호와 컨테이너의 포트 번호를 콜론으로 연결하여 기재하면 된다.
- 포트 설정 방법
- -p [호스트 포트 번호]:[컨테이너 포트 번호]
- -p 8080:80

1. 포트를 설정하여 컨테이너 생성 및 실행
   - 커맨드 : docker run --name apa000ex2 -d -p 8080:80 httpd

2. 실행 중인 컨테이너 확인
  - 커맨드 : docker ps
  - 아래 표와 같은 결과가 출력된다.

|CONTAINER ID|IMAGE|COMMAND|CREATED|STATUS|PORTS|NAMES|
|---|---|---|---|---|---|---|
|acc401f0b507|httpd|"httpd-foreground"|35 seconds ago|Up 34 seconds|0.0.0.0:8080->80/tcp|apa000ex2|
  - PORTS 부분을 보면 호스트 컴퓨터의 어떤 포트 번호와 컨테이너의 어떤 포트 번호가 연결되어 있는지 확인할 수 있다.

3. 웹 브라우저를 통해 접근 확인
   - 웹 브라우저에서 http://localhost:8080에 접근해보자

4. 컨테이너 종료
   - 커맨드 docker stop apa000ex2

5. rm 커맨드로 컨테이너 삭제
   - 커맨드 : docker rm apa000ex2

6. ps 커맨드와 인자를 사용해 컨테이너 존재 여부 확인
 - 커맨드 : docker ps -a  





