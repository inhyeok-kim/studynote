# Spring boot와 Redis 활용하기

## Spring boot에서 Redis 세팅하기
1. 스프링 부트에서 레디스를 사용하려면 `spring-boot-starter-data-redis`를 의존성에 추가해줘야 한다.
```gradle
implementation 'org.springframework.boot:spring-boot-starter-data-redis'
```

2. application.yml 설정
application.yml에 레디스의 host와 포트를 설정한다.
```yml
spring:
  redis:
    host: localhost
    port: 6379
```
이 외에 기타 설정은 아래 참고
|속성|설명|
|---|---|
|spring.redis.host|	Redis 서버의 호스트 이름|
|spring.redis.port|	Redis 서버의 포트 번호|
|spring.redis.password|	Redis 서버에 접근하기 위한 비밀번호|
|spring.redis.database|	사용할 Redis 데이터베이스의 인덱스|
|spring.redis.ssl|	SSL 연결 사용 여부|
|spring.redis.timeout|	Redis 서버와의 연결 시간 제한|
|spring.redis.lettuce.pool.max-active|	동시에 유지할 수 있는 최대 연결 수|
|spring.redis.lettuce.pool.max-idle|	유휴 상태에서 유지할 수 있는 최대 연결 수|
|spring.redis.lettuce.pool.min-idle|	유휴 상태에서 유지할 수 있는 최소 연결 수|

3. RedisConfig
```java
@Configuration
public class RedisConfig {

    @Value("${spring.redis.host}")
    private String host;

    @Value("${spring.redis.port}")
    private int port;

    @Bean
    public RedisConnectionFactory redisConnectionFactory() {
        return new LettuceConnectionFactory(host, port);
    }

    @Bean
    public RedisTemplate<String, Object> redisTemplate() {
        RedisTemplate<String, Object> redisTemplate = new RedisTemplate<>();
        redisTemplate.setConnectionFactory(redisConnectionFactory());

        // 일반적인 key:value의 경우 시리얼라이저
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        redisTemplate.setValueSerializer(new StringRedisSerializer());

        // Hash를 사용할 경우 시리얼라이저
        redisTemplate.setHashKeySerializer(new StringRedisSerializer());
        redisTemplate.setHashValueSerializer(new StringRedisSerializer());

        // 모든 경우
        redisTemplate.setDefaultSerializer(new StringRedisSerializer());

        return redisTemplate;
    }
}
```


